# Story 1.9: Initial Data Seeding

## Status
Draft

## Story
**As a** new user launching Dopamine Hero,
**I want** the application to have essential seed data including starter modules and reference configurations,
**so that** I can immediately experience the core gameplay mechanics without waiting for content to be created.

## Acceptance Criteria
1. Starter module catalog with 8-10 basic modules is created and seeded
2. Module effects and costs are properly balanced for initial gameplay
3. User statistics and achievement templates are initialized
4. Basic task categories and priorities are available
5. Default user preferences and themes are configured
6. Database migration scripts include seed data insertion
7. Seed data is versioned and repeatable across environments
8. Validation scripts confirm seed data integrity

## Tasks / Subtasks
- [ ] Task 1: Design Starter Module Catalog (AC: 1, 2)
  - [ ] Define 8-10 starter modules with balanced costs and effects
  - [ ] Create module types: generators, multipliers, special abilities
  - [ ] Establish module rarity distribution (common, uncommon, rare)
  - [ ] Calculate energy costs and dopamine generation rates
  - [ ] Design module interaction effects and synergy bonuses

- [ ] Task 2: Create Database Seed Scripts (AC: 3, 4, 5, 6)
  - [ ] Write SQL migration scripts for module data insertion
  - [ ] Create user statistics initialization procedures
  - [ ] Define task categories and default priorities
  - [ ] Set up default user preferences and theme configurations
  - [ ] Add achievement templates and unlock conditions

- [ ] Task 3: Implement Seed Data Management (AC: 7, 8)
  - [ ] Create seed data versioning system
  - [ ] Build repeatable seed execution scripts
  - [ ] Add data integrity validation procedures
  - [ ] Create seed data update and rollback mechanisms
  - [ ] Document seed data management process

- [ ] Task 4: Integrate with Deployment Pipeline (AC: 6)
  - [ ] Update CI/CD pipeline to run seed data migrations
  - [ ] Add environment-specific seed data configurations
  - [ ] Create seed data testing procedures
  - [ ] Document seed data deployment verification

## Dev Notes

### Previous Story Insights
This story builds upon the database schema established in Story 1.7 and the deployment infrastructure from Story 1.8. The seed data will populate the database structure created in earlier stories.

### Data Models

Based on database schema [Source: architecture-database-schema.md]:

**Module Catalog Structure**:
```sql
-- Core module types for starter catalog
module_type: 'generator' | 'multiplier' | 'special' | 'synergy'
module_rarity: 'common' | 'uncommon' | 'rare' | 'legendary'

-- Starter modules to seed
- Energy Generator (Common): Basic energy generation during focus
- Focus Multiplier (Common): Increases energy earned per minute
- Task Bonus (Uncommon): Extra energy for task completion
- Streak Keeper (Uncommon): Maintains focus streak bonuses
- Synthesizer (Rare): Combines module effects for bonuses
- Dopamine Amplifier (Rare): Increases dopamine generation
- Time Bender (Legendary): Reduces focus time requirements
- Achievement Hunter (Legendary): Bonus rewards for milestones
```

**User Initialization Data**:
```sql
-- Default user preferences
{
  "focusSessionDuration": 25,
  "theme": "auto",
  "notifications": {
    "sessionComplete": true,
    "achievements": true,
    "dailyGoals": true
  },
  "accessibility": {
    "reducedMotion": false,
    "highContrast": false,
    "largeText": false
  }
}

-- Initial user statistics
{
  "total_focus_time": 0,
  "total_tasks_completed": 0,
  "current_streak_days": 0,
  "longest_streak_days": 0,
  "modules_owned": 0,
  "presets_created": 0,
  "productivity_by_category": {},
  "weekly_progress": []
}
```

### API Specifications
No new API endpoints required - this story focuses on data initialization.

### Component Specifications
No UI components involved - backend data seeding story.

### File Locations
Based on project structure [Source: architecture-tech-stack.md#Project Structure]:

**Seed Data Scripts**:
- `apps/api/src/database/seeds/` - Seed data scripts
- `apps/api/src/database/seeds/modules.ts` - Module catalog seeding
- `apps/api/src/database/seeds/user-data.ts` - User initialization data
- `apps/api/src/database/seeds/achievements.ts` - Achievement templates

**Migration Integration**:
- `apps/api/src/database/migrations/` - Database migration files
- `apps/api/src/database/migration-runner.ts` - Migration execution logic

### Testing Requirements
Based on testing strategy [Source: architecture-deployment-testing.md#Testing Strategy]:

**Seed Data Testing**:
- Unit tests for seed data generation functions
- Integration tests for seed script execution
- Validation tests for data integrity
- Environment-specific seed data testing

**Test Coverage Requirements**:
- Seed data generation functions: 100% coverage
- Migration execution: 90% coverage
- Data validation: 95% coverage

### Technical Constraints

**Module Balance Constraints** [Source: PRD.md#Dual-Currency Economic Loop Design]:
- Energy costs must be balanced with dopamine generation
- Starter modules should provide immediate value
- Progression path from common to legendary modules
- Economic loop sustainability for long-term engagement

**Database Constraints** [Source: architecture-database-schema.md]:
- All currency values must be non-negative
- Foreign key constraints must be maintained
- Unique constraints for user-module relationships
- Transaction atomicity for currency operations

### Seed Data Versioning Strategy

**Version Management**:
- Semantic versioning for seed data releases
- Backward compatibility considerations
- Environment-specific data variations
- Rollback procedures for failed deployments

**Data Integrity**:
- Validation scripts for seed data consistency
- Cross-reference validation between related tables
- Performance testing for large dataset imports
- Monitoring for seed data deployment issues

### Module Catalog Design

**Economic Balance Principles**:
- Energy generation rate: 1.0-3.0 energy per minute base
- Dopamine generation: 0.1-0.5 dopamine per minute base
- Module costs: 10-100 energy for acquisition
- Enhancement costs: 5-50 dopamine per upgrade

**Progression Design**:
- Common modules: Available immediately, low cost
- Uncommon modules: Unlock after first focus session
- Rare modules: Unlock after 5 completed sessions
- Legendary modules: Unlock after achievement milestones

## Testing

### Seed Data Testing Strategy

**Unit Testing**:
- Test seed data generation functions
- Validate module balance calculations
- Test user initialization procedures
- Verify data constraint enforcement

**Integration Testing**:
- Test complete seed script execution
- Validate database state after seeding
- Test migration rollback scenarios
- Verify cross-environment consistency

**Performance Testing**:
- Seed data execution timing
- Database performance with seed data
- Memory usage during seeding
- Concurrent seeding scenarios

**Data Validation Testing**:
- Schema constraint validation
- Data consistency checks
- Economic balance verification
- Cross-reference integrity

## Change Log
| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-10-20 | 1.0 | Initial story creation for seed data and module catalog | Sarah (PO Agent) |

## Dev Agent Record

### Agent Model Used
(To be filled by development agent)

### Debug Log References
(To be filled by development agent)

### Completion Notes List
(To be filled by development agent)

### File List
(To be filled by development agent)

## QA Results
(To be filled by QA agent)